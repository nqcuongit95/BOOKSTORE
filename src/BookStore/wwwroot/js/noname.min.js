function initializeCRUDForm(){$(".crud-form .action-buttons .cancel.button").click(function(){hideFormModal()});$(".crud-form .field input").each(function(){$(this).attr("maxlength",$(this).attr("data-val-maxlength-max"))});initializeValidation()}function crudFormSubmit(n){var t=$(n),r=t.closest("form").attr("action"),u=t.closest("form").serialize(),i=1e3;activeMessageLoader();$.ajax({url:r,type:"post",data:u,success:function(n){if(n!==null){if(inactiveMessageLoader(),showMessage(n),n.type!=="error")if(activeMessageProgress(),n.results.Reload!==null&&n.results.Reload===!0)setTimeout(function(){location.reload();message.modal("hide")},i);else{var t=n.results.RedirectUrl;t!==null&&setTimeout(function(){location=t;message.modal("hide")},i)}}else inactiveMessageLoader(),showDefaultErrorMessage()},error:function(){inactiveMessageLoader();showDefaultErrorMessage()}})}function initializeDataTableActionButton(){$(".data-table .action-buttons .item").click(function(n){onClickActionButton(this,n)})}function initializeIndexPagination(){var n=$("#index-pagination>.dropdown");n.dropdown("set selected",$("#page-index").val());n.dropdown({onChange:function(n){location.search({page:n})}})}function onClickActionButton(n,t){t.preventDefault();n=$(n);var r=n.attr("href"),i=$("#form-modal");activeMessageLoader();$.ajax({url:r,type:"post",success:function(n){typeof n=="string"?(i.html(n),initializeCRUDForm(),inactiveMessageLoader(),i.modal("show")):(inactiveMessageLoader(),showMessage(n))},error:function(){inactiveMessageLoader();showDefaultErrorMessage()}})}function showDefaultErrorMessage(){var n=$("#message"),t=$("#message>.header>.title"),i=$("#message>.content");n.attr("type","error");t.text(t.attr("data-default-value"));i.text(i.attr("data-default-value"));n.children(".header").find(">.icon").addClass("hidden");n.children(".actions").find(">.button").addClass("hidden");n.children(".header").find(">.error").removeClass("hidden");n.children(".actions").find(">.error").removeClass("hidden");n.modal("show")}function showMessage(n){if(n!==null){var t=$("#message"),i=$("#message>.header>.title"),r=$("#message>.content");t.attr("type",n.type);i.text(n.header);r.text(n.content);t.children(".header").find(">.icon").addClass("hidden");t.children(".actions").find(">.button").addClass("hidden");t.children(".header").find(">."+n.type).removeClass("hidden");t.children(".actions").find(">."+n.type).removeClass("hidden");t.modal("show")}}function hideMessage(){$("#message").modal("hide")}function activeMessageLoader(){$("#message-loader").addClass("active")}function inactiveMessageLoader(){$("#message-loader").removeClass("active")}function initializeMessageProgress(n,t){$("#message-progress").progress({duration:n,total:t})}function activeMessageProgress(n){var t=$("#message-progress"),i=t.progress("get total"),r=n/i;t.progress("reset");t.removeClass("hidden");setInterval(function(){t.progress("increment")},r)}function inactiveMessageProgress(){var n=$("#message-progress");n.progress("reset");n.addClass("hidden")}function showFormModal(){$("#form-modal").modal("show")}function hideFormModal(){$("#form-modal").modal("hide")}$(document).ready(function(){initializeCRUDForm();initializeDataTableActionButton();initializeIndexPagination();initializeMessageProgress(0,100)});