
@model DonHangViewModel
@{
    ViewData["Title"] = "Chi Tiết Đơn Hàng";
}

<link href="~/css/ChiTietDonHang.css" rel="stylesheet" />
@section menu{
    <div class="ui secondary pointing fluid menu">
        <h2 class="ui header">Phiếu Trả Hàng</h2>
        <div class="right menu">
            <div class="item">
                <div class="ui transparent icon input">
                    <input type="text" placeholder="Tìm kiếm..." class="search-input">
                    <a class="search-btn">
                        <i class="search icon"></i>
                    </a>
                </div>
            </div>
            <a class="ui item" asp-controller="DonHang" asp-action="Index" id="donhang">
                Đơn Hàng
            </a>
            <a class="ui item" asp-controller="PhieuThu" asp-action="Index" id="phieuthu">
                Phiếu Thu
            </a>
            <a class="ui item" asp-controller="PhieuChi" asp-action="Index" id="phieuchi">
                Phiếu Chi
            </a>
            <a class="ui active item" asp-controller="TraHang" asp-action="Index" id="phieuthu">
                Phiếu Trả Hàng
            </a>
        </div>
    </div>
    <div class="row">
        <div class="sixteen wide column">
            <div class="ui secondary menu four item">
                <a class="active item"
                   asp-controller="TraHang"
                   asp-action="Index">
                    <i class="list layout icon"></i>
                    Danh sách phiếu trả hàng
                </a>
                <a class="item"
                   asp-controller="TraHang"
                   asp-action="Create">
                    <i class="add square icon"></i>
                    Thêm mới phiếu trả hàng
                </a>
            </div>
        </div>
    </div>
}

<div class="row">

    <div class="twelve wide column">
        <div class="ui grid">
            <!-- Thông tin khách hàng-->
            <div class="row">
                <div class="sixteen wide column">
                    <div style="height:160px;">
                        <div class="column">
                            <h4 class="ui dividing teal header">THÔNG TIN KHÁCH HÀNG</h4>
                        </div>
                        <div class="row">
                            <div class="ui three column grid" style="padding-top:9px">
                                <div class="column">
                                    <h2 class="infoHeader">@Model.khachhang.TenLoaiKhachHang</h2>
                                </div>
                                <div class="column">
                                    <h4 class="infoHeader">Mã khách hàng</h4>
                                    <div>@Model.khachhang.ID</div>
                                </div>
                                <div class="column">
                                    <h4 class="infoHeader">Tên khách hàng</h4>
                                    <div>@Model.khachhang.TenKhachHang</div>
                                </div>
                                <div class="column" style="padding-top:0">
                                    <h4 class="infoHeader">Số điện thoại</h4>
                                    <div>@Model.khachhang.SoDienThoai</div>
                                </div>
                                <div class="column" style="padding-top:0">
                                    <h4 class="infoHeader">Email</h4>
                                    <div>@Model.khachhang.Email</div>
                                </div>
                                <div class="column" style="padding-top:0">
                                    <h4 class="infoHeader">Địa chỉ</h4>
                                    <div>@Model.khachhang.DiaChi</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="sixteen wide column">
                        <h4 class="ui dividing teal header">THÔNG TIN HÀNG HÓA</h4>
                    </div>
                    <div style="margin-top:11px; overflow:auto;">
                        <table class="ui very basic selectable table">
                            <thead>
                                <tr>
                                    <th class="two wide">Mã hàng</th>
                                    <th class="eight wide">Tên hàng</th>
                                    <th class="two wide">Số lượng</th>
                                    <th class="two wide">Đơn giá</th>
                                    <th class="two wide">Thành tiền</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                    <div style="overflow-x:hidden;overflow-y:auto; height: 180px;">
                        <table class="ui very basic selectable hidethead table">
                            <thead>
                                <tr>
                                    <th class="two wide"></th>
                                    <th class="eight wide"></th>
                                    <th class="two wide"></th>
                                    <th class="two wide"></th>
                                    <th class="two wide"></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var customer in @Model.details)
                                {
                                    <tr>
                                        <td class="two wide">
                                            @customer.ID
                                        </td>
                                        <td class="eight wide">
                                            @customer.TenHangHoa
                                        </td>
                                        <td class="two wide">
                                            @customer.SoLuong
                                        </td>
                                        <td class="two wide">
                                            @customer.GiaBan
                                        </td>
                                        <td class="two wide">
                                            @customer.ThanhTien
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="sixteen wide column">
                        <h4 class="ui dividing teal header"></h4>
                    </div>
                    <div class="row">
                        <div class="ui two column grid" style="padding-top:9px">
                            <div class="ten wide column">
                                <h4 class="infoHeader">Ghi chú</h4>
                            </div>
                            <div class="six wide column">
                                <div class="ui two column grid">
                                    <div class="wide column">
                                        <h4 class="infoHeader">Tổng tiền</h4>
                                    </div>
                                    <div class="right aligned column">
                                        <div>@Model.TongTien</div>
                                    </div>
                                    <div class="wide column">
                                        <h4 class="infoHeader">Khách phải trả</h4>
                                    </div>
                                    <div class="right aligned column">
                                        <div>@Model.TongTien</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="four wide column">
        <form id="payment-form">
            <div class="ui grid">
                @*<div class="row">
                        <div class="column">
                            <div class="ui dividing header">@Model.TenTrangThai</div>
                        </div>
                    </div>*@
                <!-- Thanh toan -->
                <div class="row">

                    <div class="column">
                        <div class="ui dividing header">@Model.TenTrangThai</div>
                        <table class="ui very basic table">
                            <tbody>
                                <tr>
                                    <td class="six wide">Tổng tiền</td>
                                    <td class="ten wide right aligned">
                                        <div id="tongtien">@Model.TongTien</div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="six wide">Tiền đã thu</td>
                                    <td class="ten wide right aligned">
                                        <div id="tienthu">@Model.TienDaThu</div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="ui very basic table" id="payment-table">
                            <tbody>
                                <tr>
                                    <td class="seven wide">Tiền khách đưa</td>
                                    <td class="nine wide right aligned">
                                        <div class="ui input"
                                             style="width: 140px;"
                                             id="paid-money">
                                            <input type="text"
                                                   name="CustomerPaid"
                                                   asp-for="@Model.TienThu"
                                                   style="text-align:right;" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="six wide"></td>
                                    <td class="ten wide right aligned">
                                        <button class="ui positive fluid button" id="pay">Thanh toán</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                @* trả hàng *@
                <div class="row">
                    <div class="column">
                        <div class="ui dividing header">Trả hàng</div>
                        <table class="ui very basic table" id="repayment-table">
                            <tbody>
                                <tr>
                                    <td class="six wide"></td>
                                    <td class="ten wide right aligned">
                                        <button class="ui positive fluid button"
                                                asp-controller="DonHang"
                                                asp-action="UpdateDonHang">
                                            Hoàn trả
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    //$(document).ready(function () {
    //    var a = document.getElementById("tienthu").value;
    //    var b = document.getElementById("tongtien").value;
    //    if () {
    //        $("#payment-table").hide();
    //        alert(a + "-----" + b)
    //    }
    //    else {
    //        $("#payment-table").show();
    //    }
    //})
</script>
